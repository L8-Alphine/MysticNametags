// MysticNameTags Dashboard UI (sidebar-style)

// Common UI helpers
$C = "../Common.ui";

// Primary/secondary button styles (bottom + quick actions)
@PrimaryButton = TextButtonStyle(
  Default: (Background: #3a7bd5, LabelStyle: (FontSize: 14, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)),
  Hovered: (Background: #4a8be5, LabelStyle: (FontSize: 14, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)),
  Pressed: (Background: #2a6bc5, LabelStyle: (FontSize: 14, TextColor: #ffffff, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center))
);

@SecondaryButton = TextButtonStyle(
  Default: (Background: #2b3542, LabelStyle: (FontSize: 14, TextColor: #96a9be, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)),
  Hovered: (Background: #3b4552, LabelStyle: (FontSize: 14, TextColor: #b6c9de, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center)),
  Pressed: (Background: #1b2532, LabelStyle: (FontSize: 14, TextColor: #96a9be, RenderBold: true, HorizontalAlignment: Center, VerticalAlignment: Center))
);

// Sidebar tab styles
@SidebarButtonStyle = TextButtonStyle(
  Default: (Background: #0a0f14, LabelStyle: (FontSize: 13, TextColor: #8a9aaa, RenderBold: false)),
  Hovered: (Background: #1a2332(0.5), LabelStyle: (FontSize: 13, TextColor: #ffffff, RenderBold: false)),
  Pressed: (Background: #1a2332(0.7), LabelStyle: (FontSize: 13, TextColor: #ffffff, RenderBold: false)),
  Disabled: (Background: #0a0f14, LabelStyle: (FontSize: 13, TextColor: #5a6570, RenderBold: false)),
  Sounds: $C.@ButtonSounds,
);

@SidebarButtonFocusedStyle = TextButtonStyle(
  Default: (Background: #4a7bc8, LabelStyle: (FontSize: 13, TextColor: #ffffff, RenderBold: true)),
  Hovered: (Background: #5a8bd8, LabelStyle: (FontSize: 13, TextColor: #ffffff, RenderBold: true)),
  Pressed: (Background: #3a6bb8, LabelStyle: (FontSize: 13, TextColor: #ffffff, RenderBold: true)),
  Disabled: (Background: #3a5f9f, LabelStyle: (FontSize: 13, TextColor: #b0c0d0, RenderBold: true)),
  Sounds: $C.@ButtonSounds,
);

// Root
Group {
  Anchor: (Width: 1000, Height: 620);
  Background: #141c26(0.98);
  LayoutMode: Left;
  Padding: (Full: 0);

  // ======================
  // Sidebar
  // ======================
  Group #Sidebar {
    Anchor: (Width: 210);
    LayoutMode: Top;
    Background: #0a0f14;
    Padding: (Left: 14, Right: 14, Top: 16, Bottom: 16);

    Label {
      Text: "MysticNameTags";
      Anchor: (Height: 26);
      Style: (FontSize: 18, TextColor: #ffffff, RenderBold: true);
    }

    Label {
      Text: "Dashboard";
      Anchor: (Height: 18);
      Style: (FontSize: 12, TextColor: #6e7da1);
    }

    Group { Anchor: (Height: 14); }

    Label {
      Text: "Sections";
      Anchor: (Height: 18);
      Style: (FontSize: 12, TextColor: #6e7da1, RenderBold: true);
    }

    Group { Anchor: (Height: 6); }

    // Overview nav
    Group {
      LayoutMode: Top;
      Anchor: (Height: 44);

      TextButton #OverviewTabButtonSelected {
        Text: "Overview";
        Anchor: (Height: 36);
        Style: @SidebarButtonFocusedStyle;
        Visible: true;
      }

      TextButton #OverviewTabButton {
        Text: "Overview";
        Anchor: (Height: 36);
        Style: @SidebarButtonStyle;
        Visible: false;
      }
    }

    Group { Anchor: (Height: 6); }

    // Integrations nav
    Group {
      LayoutMode: Top;
      Anchor: (Height: 44);

      TextButton #IntegrationsTabButtonSelected {
        Text: "Integrations";
        Anchor: (Height: 36);
        Style: @SidebarButtonFocusedStyle;
        Visible: false;
      }

      TextButton #IntegrationsTabButton {
        Text: "Integrations";
        Anchor: (Height: 36);
        Style: @SidebarButtonStyle;
        Visible: true;
      }
    }

    Group { Anchor: (Height: 6); }

    // Debug nav
    Group {
      LayoutMode: Top;
      Anchor: (Height: 44);

      TextButton #DebugTabButtonSelected {
        Text: "Debug & Support";
        Anchor: (Height: 36);
        Style: @SidebarButtonFocusedStyle;
        Visible: false;
      }

      TextButton #DebugTabButton {
        Text: "Debug & Support";
        Anchor: (Height: 36);
        Style: @SidebarButtonStyle;
        Visible: true;
      }
    }

    // Sidebar filler
    Group { FlexWeight: 1; }

    Label {
      Text: "Use /mntag to open";
      Anchor: (Height: 16);
      Style: (FontSize: 11, TextColor: #4c5568);
    }
  }

  // ======================
  // Main content area
  // ======================
  Group #MainArea {
    FlexWeight: 1;
    LayoutMode: Top;
    Padding: (Left: 18, Right: 18, Top: 18, Bottom: 16);

    // Title row + close hint
    Group {
      LayoutMode: Left;
      Anchor: (Height: 40);

      Label {
        Text: "MysticNameTags Dashboard";
        Anchor: (Height: 40);
        Style: (FontSize: 22, TextColor: #ffffff, RenderBold: true);
        FlexWeight: 1;
      }

      Label {
        Text: "Press ESC to close";
        Anchor: (Height: 18);
        Style: (FontSize: 11, TextColor: #555555);
      }
    }

    Group { Anchor: (Height: 4); }
    Group { Anchor: (Height: 1); Background: #2b3542; }
    Group { Anchor: (Height: 10); }

    // Status text
    Label #StatusText {
      Text: "Welcome to MysticNameTags!";
      Anchor: (Height: 28);
      Style: (FontSize: 15, TextColor: #96a9be);
    }

    Group { Anchor: (Height: 8); }

    // Quick info (version + integrations + tags)
    Group {
      LayoutMode: Top;
      Anchor: (Height: 86);
      Background: #1c2432;
      Padding: (Full: 10);

      Label #VersionLabel {
        Text: "Version: dev";
        Anchor: (Height: 22);
        Style: (FontSize: 13, TextColor: #b6c9de);
      }

      Label #IntegrationsLabel {
        Text: "Integrations: (detecting...)";
        Anchor: (Height: 22);
        Style: (FontSize: 13, TextColor: #b6c9de);
      }

      Label #TagCountLabel {
        Text: "Loaded Tags: 0";
        Anchor: (Height: 22);
        Style: (FontSize: 13, TextColor: #b6c9de);
      }
    }

    Group { Anchor: (Height: 8); }

    // Resource stats row
    Group {
      LayoutMode: Top;
      Anchor: (Height: 56);
      Background: #1c2432;
      Padding: (Full: 10);

      Label #CpuLabel {
        Text: "CPU (JVM): N/A";
        Anchor: (Height: 20);
        Style: (FontSize: 12, TextColor: #6e7da1);
      }

      Label #RamLabel {
        Text: "RAM (JVM): N/A";
        Anchor: (Height: 20);
        Style: (FontSize: 12, TextColor: #6e7da1);
      }
    }

    Group { Anchor: (Height: 10); }

    // ======================
    // Tab content with scrollbar
    // ======================
    Group #TabContentContainer {
      FlexWeight: 1;
      LayoutMode: Top;
      Background: #1c2432;
      Padding: (Full: 8);

      Group #TabScroll {
        LayoutMode: TopScrolling;
        Anchor: (Full: 1);
        Padding: (Left: 2, Right: 6, Top: 2, Bottom: 2);
        ScrollbarStyle: $C.@DefaultScrollbarStyle;

        Group {
          LayoutMode: Top;

          // --- Overview ---
          Group #TabOverviewPanel {
            LayoutMode: Top;
            Anchor: (Full: 1);

            Label {
              Text: "Overview";
              Anchor: (Height: 22);
              Style: (FontSize: 13, TextColor: #ffffff, RenderBold: true);
            }

            Label {
              Text: "- Use /tags to open the Tag Selector.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- Equip tags you own or purchase via your economy plugin.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- Nameplates refresh automatically when ranks/tags change.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- Use this dashboard to reload config, clear caches and debug.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Group { Anchor: (Height: 6); }

            Label {
              Text: "Hints";
              Anchor: (Height: 20);
              Style: (FontSize: 12, TextColor: #ffffff, RenderBold: true);
            }

            Label {
              Text: "- Add tags in tags.json, then click Reload to apply them.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- Use /tagsadmin givetag <player> <id> to grant tags directly.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- Use the Quick Actions box below for common admin tasks.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }
          }

          // --- Integrations ---
          Group #TabIntegrationsPanel {
            LayoutMode: Top;
            Anchor: (Full: 1);
            Visible: false;

            Label {
              Text: "Integrations";
              Anchor: (Height: 22);
              Style: (FontSize: 13, TextColor: #ffffff, RenderBold: true);
            }

            Label {
              Text: "- LuckPerms + PermissionsPlus provide rank groups and permissions.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- Economy priority: EconomySystem → EcoTale → VaultUnlocked → EliteEssentials.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- Free tags still require appropriate permission nodes.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- The summary above shows which backends are currently detected.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "Placeholders";
              Anchor: (Height: 20);
              Style: (FontSize: 12, TextColor: #ffffff, RenderBold: true);
            }

            // This one is updated dynamically from Java
            Label #PlaceholderBackendsLabel {
              Text: "Placeholders: detecting...";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Group { Anchor: (Height: 8); }

            Label {
              Text: "Economy tips";
              Anchor: (Height: 20);
              Style: (FontSize: 12, TextColor: #ffffff, RenderBold: true);
            }

            Label {
              Text: "- If no economy is detected, tag prices are ignored.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- Use debug snapshot to confirm which economy backend is active.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }
          }

          // --- Debug ---
          Group #TabDebugPanel {
            LayoutMode: Top;
            Anchor: (Full: 1);
            Visible: false;

            Label {
              Text: "Debug & Support";
              Anchor: (Height: 22);
              Style: (FontSize: 13, TextColor: #ffffff, RenderBold: true);
            }

            Label {
              Text: "- 'Debug Snapshot' prints full plugin state to console/logs.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- Snapshot includes active tag, integrations, and version info.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- Attach that output when opening a bug report.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- 'Refresh Nameplate' re-sends the current tag to your nameplate.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }

            Label {
              Text: "- 'Clear Cache' forgets local tag + nameplate cache for you.";
              Anchor: (Height: 18);
              Style: (FontSize: 12, TextColor: #96a9be);
            }
          }
        }
      }
    }

    Group { Anchor: (Height: 10); }

    // ======================
    // Quick actions
    // ======================
    Group {
      LayoutMode: Top;
      Anchor: (Height: 120);
      Background: #1c2432;
      Padding: (Full: 10);

      Label {
        Text: "Quick Actions";
        Anchor: (Height: 22);
        Style: (FontSize: 13, TextColor: #ffffff, RenderBold: true);
      }

      Group {
        LayoutMode: Left;
        Anchor: (Height: 64);

        TextButton #OpenTagsButton {
          Text: "Open Tag UI";
          Anchor: (Width: 130, Height: 44);
          Style: @SecondaryButton;
        }

        Group { Anchor: (Width: 10); }

        TextButton #ClearCacheButton {
          Text: "Clear Cache";
          Anchor: (Width: 130, Height: 44);
          Style: @SecondaryButton;
        }

        Group { Anchor: (Width: 10); }

        TextButton #RefreshNameplateButton {
          Text: "Refresh Nameplate";
          Anchor: (Width: 160, Height: 44);
          Style: @SecondaryButton;
        }

        Group { Anchor: (Width: 10); }

        TextButton #DebugSnapshotButton {
          Text: "Debug Snapshot";
          Anchor: (Width: 160, Height: 44);
          Style: @SecondaryButton;
        }
      }
    }

    Group { Anchor: (Height: 10); }

    // ======================
    // Bottom buttons row
    // ======================
    Group {
      LayoutMode: Left;
      Anchor: (Height: 56);

      TextButton #RefreshButton {
        Text: "Refresh";
        Anchor: (Width: 100, Height: 44);
        Style: @PrimaryButton;
      }

      Group { Anchor: (Width: 12); }

      TextButton #ReloadButton {
        Text: "Reload";
        Anchor: (Width: 100, Height: 44);
        Style: @SecondaryButton;
      }

      Group { Anchor: (Width: 12); }

      TextButton #ModPageButton {
        Text: "Mod Page";
        Anchor: (Width: 110, Height: 44);
        Style: @SecondaryButton;
      }

      Group { Anchor: (Width: 12); }

      TextButton #BugReportButton {
        Text: "Report Bug";
        Anchor: (Width: 120, Height: 44);
        Style: @SecondaryButton;
      }

      Group { Anchor: (Width: 12); }

      TextButton #CloseButton {
        Text: "Close";
        Anchor: (Width: 90, Height: 44);
        Style: @SecondaryButton;
      }
    }
  }
}
